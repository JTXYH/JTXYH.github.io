(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{601:function(s,t,a){"use strict";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",[s._v("Java常用的服务器软件")])]),s._v(" "),a("h2",{attrs:{id:"安装jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装jdk"}},[s._v("#")]),s._v(" 安装JDK")]),s._v(" "),a("ol",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("JDK8"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh 安装包名\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证安装")]),s._v("\njava -version\n")])])]),a("h2",{attrs:{id:"安装tomcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装tomcat"}},[s._v("#")]),s._v(" 安装tomcat")]),s._v(" "),a("ul",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"http://ftp.wayne.edu/apache/tomcat/tomcat-8/v8.5.50/bin/apache-tomcat-8.5.50.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("tomcat-8.5.5"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf apache-tomcat-8.5.50.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动到usr/local下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" apache-tomcat-8.5.50 /usr/local\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动tomcat命令，进入bin目录")]),s._v("\n./start.sh\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看输出日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/logs/catalina.out\n")])])]),a("h2",{attrs:{id:"安装redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[s._v("#")]),s._v(" 安装redis")]),s._v(" "),a("ul",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"http://download.redis.io/releases/redis-4.0.14.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis-4.0.14"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf redis-4.0.14.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动到usr/local下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" redis-4.0.14 /usr/local\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入src目录编译")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改redis.conf")]),s._v("\n对bind "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1注释，设置requirepass密码\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动redis服务")]),s._v("\n./redis-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/redis.conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("在后台\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动redis客户端")]),s._v("\n./redis-cli -h "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("，输入auth 密码\n")])])]),a("h3",{attrs:{id:"创建master"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建master"}},[s._v("#")]),s._v(" 创建master")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改进程id")]),s._v("\npidfile /var/run/redis_6379.pid\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注释bind 127.0.0.1,并添加密码")]),s._v("\nrequirepass root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加日志目录")]),s._v("\nlogfile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/log/redis/redis-6379.log"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改rdb文件名")]),s._v("\ndbfilename "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(".rdb\n")])])]),a("h3",{attrs:{id:"创建slave"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建slave"}},[s._v("#")]),s._v(" 创建slave")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝redis配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(".conf "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(".conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改进程id")]),s._v("\npidfile /var/run/redis_6380.pid\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注释bind 127.0.0.1,并添加密码")]),s._v("\nrequirepass javasm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加日志目录")]),s._v("\nlogfile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/log/redis/redis-6380.log"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改rdb文件名")]),s._v("\ndbfilename "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v(".rdb\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置master的ip和端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip使用局域网IP,不要使用127.0.0.1")]),s._v("\nslaveof "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".11.217 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置master密码")]),s._v("\nmasterauth root\n")])])]),a("h3",{attrs:{id:"创建sentinel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建sentinel"}},[s._v("#")]),s._v(" 创建sentinel")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭实例保护模式")]),s._v("\nprotected-mode no\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照具体redis实例修改端口号")]),s._v("\nport "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26379")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照具体的实例端口创建日志")]),s._v("\nlogfile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/log/redis/sentinel.6379.log"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改sentinel 监控实例配置")]),s._v("\nsentinel monitor mymaster "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".11.217 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改sentinel监控连接实例的密码")]),s._v("\nsentinel auth-pass mymaster root\n")])])]),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('protected-mode no\nport 26379\ndir /tmp\nlogfile "/var/log/redis/sentinel.6379.log"\nsentinel monitor mymaster 修改为自己的ip master的端口号 2\nsentinel auth-pass mymaster master的密码\nsentinel down-after-milliseconds mymaster 3000\nsentinel failover-timeout mymaster 180000\n')])])]),a("h2",{attrs:{id:"安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装mysql")]),s._v(" "),a("ul",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysql-5.7"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个文件夹，解压缩到文件夹中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar -C mysql/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除Mysql的MariaDB依赖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mariadb "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e mariadb包全名 --nodeps "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除")]),s._v("\n\n安装mysql的rpm包common,libs,client,server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看初始密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" password /var/log/mysqld.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接mysql并修改初始密码")]),s._v("\nALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'你的密码必须包含大写字母和字符'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h3",{attrs:{id:"修改mysql访问权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改mysql访问权限"}},[s._v("#")]),s._v(" 修改mysql访问权限")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 进入mysql数据库\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 更改用户的访问权限\nflush "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 刷新权限缓存\n")])])]),a("h3",{attrs:{id:"设置主从同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置主从同步"}},[s._v("#")]),s._v(" 设置主从同步")]),s._v(" "),a("h4",{attrs:{id:"设置主库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置主库"}},[s._v("#")]),s._v(" 设置主库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑/etc/my.cnf：添加")]),s._v("\nserver-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保证唯一")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启二进制日志文件")]),s._v("\nlog-bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/mysql/mysql-bin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#连接数据库，查询到master status并记录下给从库备用：")]),s._v("\nshow master status\n")])])]),a("h4",{attrs:{id:"设置从库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置从库"}},[s._v("#")]),s._v(" 设置从库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑/etc/my.cnf添加")]),s._v("\nserver-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("保证唯一"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接数据库并执行")]),s._v("\nstop slave"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("ul",[a("li",[a("strong",[s._v("执行")])])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("change master "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" master_host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主库IP'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nmaster_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" master_user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主库用户名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \nmaster_password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主库密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \nmaster_log_file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'主库刚刚查到的File值'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nmaster_log_pos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 主库查到的Position值"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行")]),s._v("\nstart slave"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看Slave_IO_Running和Slave_SQL_Running是否是yes")]),s._v("\nshow slave status "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("G"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"安装nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[s._v("#")]),s._v(" 安装Nginx")]),s._v(" "),a("ol",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"https://nginx.org/download/nginx-1.10.3.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx-1.10.3"),a("OutboundLink")],1)])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载依赖")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib zlib-devel openssl openssl-devel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" patch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf nginx-1.10.3.tar.gz\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.10.3\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行")]),s._v("\n./configure --prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx --with-http_stub_status_module --with-http_sub_module --with-http_ssl_module --with-pcre\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证安装")]),s._v("\n/usr/local/nginx/sbin/nginx -V\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置nginx.conf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 校验配置文件")]),s._v("\n/usr/local/nginx/sbin/nginx –t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx")]),s._v("\n/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\n")])])]),a("p",[a("a",{attrs:{"data-fancybox":"",title:"nginx.conf",href:"https://gitee.com/jtxyh/blogImg/raw/master/centos-nginx.png"}},[a("img",{attrs:{src:"https://gitee.com/jtxyh/blogImg/raw/master/centos-nginx.png",alt:"nginx.conf"}})])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("./ configure")]),s._v("：配置nginx的编译环境")]),s._v(" "),a("li",[a("strong",[s._v("–pid-path")]),s._v("：nginx的进程文件存放目录")]),s._v(" "),a("li",[a("strong",[s._v("--error-log-path")]),s._v("：错误日志存放目录")]),s._v(" "),a("li",[a("strong",[s._v("--http-log-path")]),s._v("：请求日志存放目录")]),s._v(" "),a("li",[a("strong",[s._v("module")]),s._v("：Nginx中的功能,基本上都是以module的形式存在")])]),s._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"centos-nginx2",href:"https://gitee.com/jtxyh/blogImg/raw/master/centos-nginx2.png"}},[a("img",{attrs:{src:"https://gitee.com/jtxyh/blogImg/raw/master/centos-nginx2.png",alt:"centos-nginx2"}})])]),s._v(" "),a("h2",{attrs:{id:"安装mycat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装mycat"}},[s._v("#")]),s._v(" 安装MyCat")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("安装JDK")])]),s._v(" "),a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"http://dl.mycat.io/1.6-RELEASE/Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("mycat-1.6-linux"),a("OutboundLink")],1)])]),s._v(" "),a("li",[s._v("解压并移动到/usr/local")]),s._v(" "),a("li",[s._v("进入"),a("strong",[s._v("conf")]),s._v("目录修改"),a("strong",[s._v("server.xml")]),s._v("，操作的是"),a("strong",[s._v("mycat的逻辑数据库")]),s._v(" "),a("a",{attrs:{"data-fancybox":"",title:"centos-mycat1-server",href:"https://gitee.com/jtxyh/blogImg/raw/master/centos-mycat1-server.png"}},[a("img",{attrs:{src:"https://gitee.com/jtxyh/blogImg/raw/master/centos-mycat1-server.png",alt:"centos-mycat1-server"}})])]),s._v(" "),a("li",[s._v("修改"),a("strong",[s._v("schema.xml")]),s._v(" "),a("a",{attrs:{"data-fancybox":"",title:"centos-mycat1-schema",href:"https://gitee.com/jtxyh/blogImg/raw/master/centos-mycat1-schema.png"}},[a("img",{attrs:{src:"https://gitee.com/jtxyh/blogImg/raw/master/centos-mycat1-schema.png",alt:"centos-mycat1-schema"}})])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开放 8066端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n/usr/local/mycat/bin/mycat start\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n/usr/local/mycat/bin/mycat stop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n/usr/local/mycat/bin/mycat restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看运行日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" –f mycat.log\n")])])]),a("h2",{attrs:{id:"安装solr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装solr"}},[s._v("#")]),s._v(" 安装Solr")]),s._v(" "),a("ul",[a("li",[s._v("下载："),a("strong",[a("a",{attrs:{href:"https://www.apache.org/dyn/closer.lua/lucene/solr/7.7.2/solr-7.7.2.tgz",target:"_blank",rel:"noopener noreferrer"}},[s._v("Solr-7.7.2"),a("OutboundLink")],1)])]),s._v(" "),a("li",[s._v("解压并移动到/usr/local")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建Solr数据和安装目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/solr /usr/local/solr\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入solr的bin目录,执行")]),s._v("\n./install_solr_service.sh /opt/solr-5.5.5.tgz -d /data/solr -i /usr/local/solr/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给solr自动创建的用户授权")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R solr.solr /data/solr /usr/local/solr\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看solr的状态")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" solr status\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" solr start\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" solr stop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" solr restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新的core")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" -solr -c "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/solr/solr/bin/solr create -c core的名字 -n data_driven_schema_configs"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# core相当于一个文档集,存放着文档,文档字段类型配置,索引等等信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问Solr管理界面")]),s._v("\nhttp://localhost:8983/solr\n")])])]),a("h2",{attrs:{id:"安装maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装maven"}},[s._v("#")]),s._v(" 安装Maven")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("下载："),a("strong",[a("a",{attrs:{href:"http://mirrors.ibiblio.org/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("maven-3.6.3"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[a("p",[s._v("解压并移动到/usr/local")])]),s._v(" "),a("li",[a("p",[s._v("修改环境变量："),a("strong",[s._v("vim /etc/profile")]),s._v("，在末尾追加")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAVEN_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/apache-maven-3.6.0\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("}")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${MAVEN_HOME}")]),s._v("/bin\n")])])])]),s._v(" "),a("li",[a("p",[s._v("刷新配置文件")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])])])]),s._v(" "),a("li",[a("p",[s._v("配置仓库地址和windows一样")])])]),s._v(" "),a("h2",{attrs:{id:"安装rocketmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装rocketmq"}},[s._v("#")]),s._v(" 安装RocketMQ")]),s._v(" "),a("ul",[a("li",[s._v("安装"),a("strong",[s._v("JDK")])]),s._v(" "),a("li",[s._v("安装"),a("strong",[s._v("Maven")])]),s._v(" "),a("li",[s._v("安装"),a("strong",[s._v("Git")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone -b release-4.1.0-incubating https://github.com/apache/incubator-rocketmq.git\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 去目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" incubator-rocketmq\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压，没有zip就不用解压，直接下一步")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" rocketmq-all-source-release.zip，移动到/usr/local目录\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在rocket目录下执行")]),s._v("\nmvn -Prelease-all -DskipTests clean "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -U\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在distribution/target/apache-rocketmq/bin/runserver.sh下编译修改虚拟内存大小")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除原来的，把这个粘贴上去")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_OPT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JAVA_OPT}")]),s._v(' -server -Xms512m -Xmx512m -Xmn256m -XX:PermSize=128m -XX:MaxPermSize=320m"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改distribution/target/apache-rocketmq/bin/runbroker.sh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_OPT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JAVA_OPT}")]),s._v(' -server -Xms256m -Xmx256m -Xmn125m"')]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\nsystemctl stop firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAMESRV_ADDR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost:9876\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqnamesrv "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f ~/logs/rocketmqlogs/namesrv.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台启动Broker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqbroker -n localhost:9876 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoCreateTopicEnable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f ~/logs/rocketmqlogs/broker.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试发送消息和接收消息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送消息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/tools.sh org.apache.rocketmq.example.quickstart.Producer\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接收消息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后启动的先停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqshutdown broker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/mqshutdown namesrv\n")])])]),a("h3",{attrs:{id:"安装rocketmq监控平台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装rocketmq监控平台"}},[s._v("#")]),s._v(" 安装RocketMQ监控平台")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压,移动到/usr/local目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" rocketmq-externals-master.zip\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/rocketmq-externals-master/rocketmq-console/src/main/resources\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改application.properties配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改里面的namesrvAddr的地址为需要监控的MQ地址加端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/rocketmq-externals-master/rocketmq-console/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行")]),s._v("\nmvn clean package -Dmaven.test.skip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行jar包")]),s._v("\njava -jar target/rocketmq-console-ng-1.0.0.jar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看")]),s._v("\nhttp://localhost:8080/\n")])])]),a("h3",{attrs:{id:"安装docker自动补全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker自动补全"}},[s._v("#")]),s._v(" 安装Docker自动补全")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y bash-completion\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /usr/share/bash-completion/bash_completion\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /usr/share/bash-completion/completions/docker\n")])])]),a("h3",{attrs:{id:"设置时间同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置时间同步"}},[s._v("#")]),s._v(" 设置时间同步")]),s._v(" "),a("p",[s._v("安装ntpdate工具")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntp ntpdate\n")])])]),a("p",[s._v("设置系统时间与网络时间同步")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ntpdate cn.pool.ntp.org\n")])])]),a("p",[s._v("将系统时间写入硬件时间")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("hwclock --systohc\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);